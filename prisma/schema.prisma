generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Course {
  id       Int        @id @default(autoincrement())
  name     String
  Semester Semester[]
}

model Semester {
  name     String
  courseId Int
  Course   Course    @relation(fields: [courseId], references: [id])
  Subject  Subject[]

  @@id([name, courseId])
}

model SubDetail {
  qn           String
  qn2          String?
  note         String
  year         Int
  subjectName  String
  semesterName String
  courseId     Int
  Subject      Subject @relation(fields: [subjectName, semesterName, courseId], references: [name, semesterName, courseId])

  @@id([courseId, semesterName, subjectName, year, qn])
}
// schema bug 

model Subject {
  name         String
  semesterName String
  courseId     Int
  SubDetail    SubDetail[]
  Semester     Semester    @relation(fields: [semesterName, courseId], references: [name, courseId])

  @@id([name, semesterName, courseId])
}
